# 李雷的七牛云存储体验之旅  

## 第1章 基本概念与术语  

牛小七为李雷讲解的第一部分，是七牛云存储相关概念与术语。  

“首先需要明确的是，七牛云存储的核心服务，即存储服务，是为用户保存各种*资源*。通俗地说，就是保存各种*文件*。”  
小七拿起粉笔在黑板上画出一幅图：  



“每个资源都是独立实体，有自己的名字，称为*资源名*（Key）。”  
“逻辑上，将多个资源组织在一个*资源空间*（Bucket）里。每个资源空间可以容纳无限量的、不重名的资源，同时一个资源只能存在于一个资源空间中。七牛用户的每个帐号都可以创建最多N个不重名的资源空间。”  
“可以看到，‘账号－资源空间－资源’的三级树状组织结构，便于根据业务特点灵活组织。咱们要做的相册与视频专辑，刚好可以组织成‘账号（1）－资源空间（2）－资源（N）’的形式。”  

小七画下另一幅图，续道，“物理上，根据某种高效的选择算法，同一个资源空间的不同资源被存储在不同的数据服务器上，便于容量扩展与加速访问。七牛用户完全不必关心具体的底层数据存储模型，一切交由存储服务实时、安全、弹性地处理，最大程度降低开发成本和运维成本。这一切收益都来自简洁高效的*Key-Value信息组织结构*。”  

“Key-Value信息组织结构？”虽不是头一次听说这个名词，但也没有深入研究过，李雷颇感新鲜。“七牛用的KV结构，特点是什么？”  

“特点是，在七牛云存储中，只存储最基本的资源元信息与资源本身，产出资源的业务逻辑和信息则由七牛用户自己来组织管理，将信息基础设施从产品中剥离出来，转型成‘轻产品、高速迭代’的研发形态，将生产力聚焦在客户需求上，以便更快、更灵活地去应对市场的变幻无常。”  

“大概明白了。那么对于七牛用户来说，完全可以把七牛云存储当成外部黑盒子系统来用？”  

“这是紧跟着要解释的问题。”小七把黑板擦干净，又画上两个新的图。  



“七牛目前提供两种上传模型，各包含三个实体：*七牛云存储服务*（Qiniu-Cloud-Service）提供基础存储服务、文件处理服务和加速分发服务；*应用服务器*（App-Server）为七牛用户的业务服务器，处理业务逻辑；*应用客户端*（App-Client）为七牛用户的客户端，也即最终用户使用的软件，可以是手机应用（App）或网站应用（Web Site）。根据使用场景的不同，比如资源同步（Resouce-Sync）或用户产生内容上传（UGC），以及现实环境的限制，如无线局域网（WiFi）或移动网络（2.5G/3G），可以灵活选用不同模型，提升使用体验。”  

“使用过程中，还涉及到*授权*（Authentication）的概念。对于上传，需要七牛用户给予适当授权，以确保资源能正确上传，同时不被恶意覆盖、篡改；对于下载，则视资源空间是公开还是私有而定，下载私有资源同样需要七牛用户给予适当授权。”  

“七牛云存储为每个账号颁发两对*用户凭证*（Access Key）和*签名密钥*（Secret Key）。每个密钥均可用于对访问请求的核心信息进行不可逆签名，附上对应的用户凭证后得到授权访问某个资源的令牌（Token）。共有三种令牌：*上传令牌*（Upload Token）、*下载令牌*（Download Token）与*管理令牌*（Access Token）。”  

“切记，用户凭证和签名密钥是访问七牛云存储服务的关键信息，务必确保不会泄露。一旦泄露，需要及时更换，以防止被第三方恶意利用，造成损失。”  

李雷一边记笔记，一边问道：“明白了。还有吗？”  

“对于基本使用，以上概念术语已经足够，更多特定概念、术语和相关细节将在具体使用过程中介绍。接下来，咱们看看实际访问细节：API与SDK。”  
